#!/bin/bash -e

# Check if at least one argument is provided
if [ $# -eq 0 ]; then
    echo "Error: No paths provided"
    echo "Usage: $0 <path1> [path2] [path3] ..."
    exit 1
fi

# Get the directory where the script is located
REPO_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")" && cd .. && pwd)"
TEMPLATE_DIR="$REPO_ROOT/template"

# Check if template directory exists
if [ ! -d "$TEMPLATE_DIR" ]; then
    echo "Error: Template directory not found at $TEMPLATE_DIR"
    exit 1
fi

# Process each path argument
for path in "$@"; do
    TARGET_DIR="$REPO_ROOT/tasks/$path"
    
    # Create target directory
    mkdir -p "$TARGET_DIR"
    
    # Copy template contents recursively
    cp -r "$TEMPLATE_DIR"/* "$TARGET_DIR/"
    
    echo "Created: $TARGET_DIR"
done